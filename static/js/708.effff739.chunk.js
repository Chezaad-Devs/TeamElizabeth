"use strict";(self.webpackChunkaldia=self.webpackChunkaldia||[]).push([[708],{1483:(e,a,t)=>{t.d(a,{A:()=>o});var s=t(3216),n=t(5475),l=t(1179),c=t(579);const o=function(){const e=(0,s.Zp)(),a=(0,s.zy)();return(0,c.jsx)("header",{className:"Header",children:(0,c.jsxs)("nav",{className:"Container-Nav",children:[(0,c.jsx)("div",{className:"Column1",children:(0,c.jsx)(n.N_,{to:"/teamelizabethmartinez",children:(0,c.jsx)("img",{src:l,alt:"Logo",className:"Img"})})}),(0,c.jsxs)("div",{className:"column2",children:[(0,c.jsx)("button",{onClick:()=>{const t="/dashboard"===a.pathname?"/teamelizabethmartinez":"/dashboard";e(t)},className:"Btn",children:"/dashboard"===a.pathname?"Ver posts":"Crear post"}),(0,c.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e("/login")},className:"Btn",children:"Cerrar sesi\xf3n"})]})]})})}},6708:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(5043),n=t(7154),l=t(5475),c=t(579);function o(e){let{children:a,onClose:t}=e;return(0,c.jsx)("div",{className:"modal-overlay",children:(0,c.jsxs)("div",{className:"modal",children:[(0,c.jsx)("button",{className:"close-btn",onClick:t,children:"X"}),(0,c.jsx)("div",{className:"modal-content",children:a})]})})}var r=t(2823),i=t.n(r),d=(t(1815),t(5884),t(3216));function m(e){let{post:a}=e;const[t,r]=(0,s.useState)(""),[m,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),[x,b]=(0,s.useState)(!1),[g,j]=(0,s.useState)({title:a.title.rendered,content:a.content.rendered,categories:a.categories,featured_media:null,status:"publish"}),[f,N]=(0,s.useState)([]),v=localStorage.getItem("token"),w=(0,d.Zp)();(0,s.useEffect)((()=>{(async()=>{try{var e;if(null!==a&&void 0!==a&&a._links&&a._links["wp:featuredmedia"]&&null!==(e=a._links["wp:featuredmedia"][0])&&void 0!==e&&e.href){const e=await n.A.get(a._links["wp:featuredmedia"][0].href);r(e.data.source_url),console.log(e.data.source_url)}}catch(h){console.error("Error fetching image:",h),p(h.message)}finally{u(!1)}})()}),[a]),(0,s.useEffect)((()=>{(async()=>{try{const e=await n.A.get("https://teamelizabethmartinez.com/wp-json/wp/v2/categories");N(e.data),console.log(e.data)}catch(h){console.error("Error fetching categories:",h)}})()}),[]);const y=e=>{if(e.target){const{name:a,value:t}=e.target;j({...g,[a]:t})}else j({...g,content:e})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"card-container",children:[t&&(0,c.jsx)("img",{className:"image",src:t,alt:a.title.rendered}),(0,c.jsx)("h1",{className:"title",children:a.title.rendered}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("p",{className:"date",children:["Publicado ",new Date(a.date).toLocaleDateString()]}),(0,c.jsxs)("div",{className:"container-button",children:[(0,c.jsx)(l.N_,{to:"#",className:"Btn-link",onClick:()=>{b(!0)},children:"Editar"}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(console.log(e),window.confirm("\xbfEst\xe1s seguro de que deseas eliminar este post?"))try{await n.A.delete("https://teamelizabethmartinez.com/?rest_route=/wp/v2/posts/".concat(e,"&JWT=").concat(v)),window.location.href="dashboard"}catch(h){console.error("Error deleting post:",h)}})(a.id),className:"Btn-link",children:"Eliminar"})]})]})]}),x&&(0,c.jsx)(o,{closeModal:()=>b(!1),children:(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=new FormData;e.append("title",g.title),e.append("content",g.content),e.append("status",g.status),e.append("categories",g.categories),g.featured_media&&e.append("featured_media",g.featured_media),await n.A.put("https://teamelizabethmartinez.com/?rest_route=/wp/v2/posts/".concat(a.id,"&JWT=").concat(v),e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}}),b(!1),w("/dashboard")}catch(h){console.error("Falla en actualizar:",h)}},className:"form",children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{className:"block mb-2",children:"T\xedtulo:"}),(0,c.jsx)("input",{type:"text",name:"title",value:g.title,onChange:e=>y(e),className:"",style:{width:"100%",fontSize:"14px"}})]}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("label",{className:"block mb-2",children:"Contenido:"}),(0,c.jsx)(i(),{value:g.content,onChange:e=>y(e),className:""})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{className:"block mb-2",children:"Imagen actual:"}),t&&(0,c.jsx)("img",{src:t,alt:"Imagen actual",style:{maxWidth:"100%",marginBottom:"10px"}}),(0,c.jsx)("label",{className:"block mb-2",children:"Imagen nueva:"}),(0,c.jsx)("input",{type:"file",onChange:e=>{const a=e.target.files[0];j({...g,featured_media:a})},className:""}),g.featured_media&&(0,c.jsx)("img",{src:URL.createObjectURL(g.featured_media),alt:"Imagen nueva",style:{maxWidth:"100%",marginTop:"10px"}})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{className:"block mb-2",children:"Categor\xeda:"}),(0,c.jsx)("select",{name:"categories",value:g.categories||"",onChange:y,className:"",children:f.map((e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id)))})]}),(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsxs)("select",{value:g.status||"",onChange:e=>y(e),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",style:{width:"100%"},children:[(0,c.jsx)("option",{value:"publish",children:"Publicado"}),(0,c.jsx)("option",{value:"draft",children:"No publicado"})]})}),(0,c.jsxs)("div",{className:"Acciones",children:[" ",(0,c.jsx)("button",{type:"submit",className:"Btn-Actualizar",children:"Actualizar"}),(0,c.jsx)("button",{className:"Btn-Cancelar",onClick:()=>b(!1),children:"Cancelar"})]})]})})]})}var u=t(1483);const h=function(){const[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),l=localStorage.getItem("token");(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("https://teamelizabethmartinez.com/?rest_route=/wp/v2/posts&JWT=".concat(l,"&per_page=15&orderby=date&order=desc"));if(!e.ok)throw new Error("No tienes autorizaci\xf3n");const t=await e.json();a(t),console.log("los datos esta aqui:",t)}catch(e){console.error("Error fetching data: ".concat(e.message))}finally{n(!1)}})()}),[l]);const o=async t=>{try{const s=e.map((e=>e.id===t.id?t:e));a(s)}catch(s){console.error("Error updating post:",s)}};return t?(0,c.jsx)("h1",{children:"Cargando los posts..."}):(0,c.jsxs)("div",{children:[(0,c.jsx)(u.A,{}),(0,c.jsx)("section",{className:"wrap",children:e.length>0?e.map((e=>(0,c.jsx)(m,{post:e,updatePost:o},e.id))):(0,c.jsx)("h1",{className:"mt-5 font-bold text-3xl",children:"No hay posts disponibles"})})]})}},1815:()=>{},1179:(e,a,t)=>{e.exports=t.p+"static/media/Logo.4eb4677ae38978059c6b.webp"}}]);
//# sourceMappingURL=708.effff739.chunk.js.map